# ğŸ”„ Alur Sistem Order Tracking

## 1ï¸âƒ£ User Checkout Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Dashboard     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add Products to    â”‚
â”‚  Cart               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View Cart          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Checkout                               â”‚
â”‚  - Fill Name, Address, Phone            â”‚
â”‚  - Select Payment Method                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Order Created      â”‚
â”‚  Status: Diproses   â”‚
â”‚  Cart Items Cleared â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redirect to        â”‚
â”‚  Dashboard          â”‚
â”‚  Show Success MSG   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ Admin Order Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Dashboard                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Orders Menu                           â”‚
â”‚  View All Orders (Paginated)           â”‚
â”‚  See Order Status                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                 â”‚
           â†“                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Click Detail          â”‚    â”‚  Search/Filter       â”‚
â”‚  View Order Details    â”‚    â”‚  Orders by Status    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update Status Dropdown                â”‚
â”‚  - Menunggu Pembayaran  â³              â”‚
â”‚  - Diproses              âš™ï¸              â”‚
â”‚  - Dikirim               ğŸšš             â”‚
â”‚  - Selesai               âœ…             â”‚
â”‚  - Dibatalkan            âŒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Submit Status Update                  â”‚
â”‚  Database Updated                      â”‚
â”‚  Success Message Shown                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3ï¸âƒ£ User View Order History Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Dashboard              â”‚
â”‚  [ğŸ“¦ Riwayat Pesanan Button]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Riwayat Pesanan Page               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ID   â”‚ Tanggal â”‚ Total â”‚Status â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ #1   â”‚ 01-01   â”‚ 150K  â”‚ âœ…   â”‚ â”‚ Detail
â”‚  â”‚ #2   â”‚ 02-01   â”‚ 200K  â”‚ ğŸšš   â”‚ â”‚â”€â”€â”€â”€â”€â†’
â”‚  â”‚ #3   â”‚ 03-01   â”‚ 300K  â”‚ â³   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Order Detail Page                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Pengiriman Info   â”‚ Status Timeline  â”‚â”‚
â”‚  â”‚ - Nama            â”‚ âœ“ Pesanan       â”‚â”‚
â”‚  â”‚ - Alamat          â”‚ âœ“ Diproses      â”‚â”‚
â”‚  â”‚ - Telepon         â”‚ âœ“ Dikirim       â”‚â”‚
â”‚  â”‚ - Metode Bayar    â”‚ â— Selesai       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Products Ordered                    â”‚â”‚
â”‚  â”‚ - Product 1    Qty: 2   Total: 100K â”‚â”‚
â”‚  â”‚ - Product 2    Qty: 1   Total: 50K  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4ï¸âƒ£ Status Transition Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Pesanan Dibuat   â”‚
                    â”‚ Menunggu Pembayaran
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    âœ“ Pembayaran OK
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Diproses           â”‚
                    â”‚ (Admin Siapkan)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    âœ“ Siap Dikirim
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Dikirim            â”‚
                    â”‚ (Transit)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    âœ“ Sampai ke Customer
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Selesai            â”‚
                    â”‚ âœ…                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Alternative Path (Dibatalkan):
                    
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Pesanan Dibuat   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    âœ— Pembatalan
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Dibatalkan         â”‚
                    â”‚ âŒ                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â†’ Checkout
       â”‚    â””â”€â”€â†’ Create ORDER
       â”‚         â””â”€â”€â†’ Create ORDER_ITEMS
       â”‚              â””â”€â”€â†’ Clear CART_ITEMS
       â”‚
       â”œâ”€â”€â†’ View Order History
       â”‚    â””â”€â”€â†’ Query: SELECT * FROM ORDERS WHERE user_id = ?
       â”‚
       â””â”€â”€â†’ View Order Detail
            â””â”€â”€â†’ Query: SELECT * FROM ORDERS + ORDER_ITEMS
                 WHERE user_id = ? AND order_id = ?

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ADMIN     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â†’ View All Orders
       â”‚    â””â”€â”€â†’ Query: SELECT * FROM ORDERS with pagination
       â”‚
       â”œâ”€â”€â†’ View Order Detail
       â”‚    â””â”€â”€â†’ Query: SELECT * FROM ORDERS + ORDER_ITEMS
       â”‚
       â””â”€â”€â†’ Update Status
            â””â”€â”€â†’ UPDATE ORDERS SET status = ?
                 â””â”€â”€â†’ Log audit trail
```

---

## 6ï¸âƒ£ Route Structure

```
USER ROUTES (Protected by: auth, role:user)
â”‚
â”œâ”€â”€ /cart                          [CartController]
â”‚   â”œâ”€â”€ GET /                       â†’ cart.index
â”‚   â”œâ”€â”€ GET /add/{id}              â†’ cart.add
â”‚   â”œâ”€â”€ GET /remove/{id}           â†’ cart.remove
â”‚   â”œâ”€â”€ GET /increase/{id}         â†’ cart.increase
â”‚   â””â”€â”€ GET /decrease/{id}         â†’ cart.decrease
â”‚
â”œâ”€â”€ /checkout                       [CheckoutController]
â”‚   â”œâ”€â”€ GET /                       â†’ checkout.index
â”‚   â””â”€â”€ POST /process              â†’ checkout.process
â”‚
â””â”€â”€ /orders                         [UserOrderController] âœ¨ NEW
    â”œâ”€â”€ GET /                       â†’ user.orders (History)
    â””â”€â”€ GET /{id}                   â†’ user.orders.detail

ADMIN ROUTES (Protected by: auth, role:admin)
â”‚
â”œâ”€â”€ /admin/products                 [ProductController]
â”‚   â”œâ”€â”€ GET /                       â†’ admin.products.index
â”‚   â”œâ”€â”€ GET /create                 â†’ admin.products.create
â”‚   â”œâ”€â”€ POST /                      â†’ admin.products.store
â”‚   â”œâ”€â”€ GET /{id}/edit              â†’ admin.products.edit
â”‚   â”œâ”€â”€ PUT /{id}                   â†’ admin.products.update
â”‚   â””â”€â”€ DELETE /{id}                â†’ admin.products.destroy
â”‚
â””â”€â”€ /admin/orders                   [OrderController]
    â”œâ”€â”€ GET /                       â†’ admin.orders (Index)
    â”œâ”€â”€ GET /{id}                   â†’ admin.orders.show (Detail)
    â””â”€â”€ POST /{id}/status           â†’ admin.orders.status (Update)
```

---

## 7ï¸âƒ£ Model Relationships

```
User (1)
  â”œâ”€â”€â”€ hasMany â”€â”€â†’ Orders (*)
  â”œâ”€â”€â”€ hasOne  â”€â”€â†’ Cart (1)
  â””â”€â”€â”€ hasMany â”€â”€â†’ Cart::items through Cart (*)

Cart (1)
  â”œâ”€â”€â”€ belongsTo â”€â”€â†’ User (1)
  â””â”€â”€â”€ hasMany â”€â”€â†’ CartItems (*)

CartItem (*)
  â”œâ”€â”€â”€ belongsTo â”€â”€â†’ Cart (1)
  â””â”€â”€â”€ belongsTo â”€â”€â†’ Product (1)

Orders (1)
  â”œâ”€â”€â”€ belongsTo â”€â”€â†’ User (1)
  â””â”€â”€â”€ hasMany â”€â”€â†’ OrderItems (*)

OrderItem (*)
  â””â”€â”€â”€ (relationship optional - stores product snapshot)

Product (1)
  â”œâ”€â”€â”€ hasMany â”€â”€â†’ CartItems (*)
  â””â”€â”€â”€ hasMany â”€â”€â†’ OrderItems (*)
```

---

## ğŸ“Š Database Tables

```
orders
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK â†’ users)
â”œâ”€â”€ name
â”œâ”€â”€ address
â”œâ”€â”€ phone
â”œâ”€â”€ payment_method
â”œâ”€â”€ total
â”œâ”€â”€ status (default: 'diproses')
â”œâ”€â”€ created_at
â””â”€â”€ updated_at

order_items
â”œâ”€â”€ id (PK)
â”œâ”€â”€ order_id (FK â†’ orders)
â”œâ”€â”€ product_id
â”œâ”€â”€ product_name (snapshot)
â”œâ”€â”€ price (snapshot)
â”œâ”€â”€ qty
â”œâ”€â”€ subtotal
â”œâ”€â”€ created_at
â””â”€â”€ updated_at
```

---

## âœ¨ Key Features

âœ… Real-time status updates  
âœ… Visual timeline for user  
âœ… Color-coded badges  
âœ… Pagination for admin  
âœ… Email integration ready  
âœ… Audit trail ready  
âœ… Security checks  
âœ… User-friendly interface  

---

## ğŸ“ Next Steps (Optional Enhancements)

1. **Email Notifications**:
   - Send email when order created
   - Send email when status changes

2. **SMS Notifications** (if budget allows):
   - Send SMS when order shipped
   - Send SMS when delivered

3. **Tracking Number**:
   - Add tracking_number column to orders
   - Integrate with courier API

4. **Review & Rating**:
   - Allow users to rate products after delivery
   - Display average rating

5. **Return/Refund**:
   - Add return request feature
   - Track return status

6. **Invoice Download**:
   - Generate PDF invoice
   - Download from order detail page
